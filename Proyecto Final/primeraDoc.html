<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Llamar a la pagina web</title>
    
   <!--Bootstrap-->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
</head>
<body>

    


    <div class="container-fluid">
        <div class="jumbotron text-center" style="background-color: rgb(48, 184, 208);" >
            <div class="d-flex justify-content-center align-items-center"  style="background-image: url('	https://healthmatters.nyp.org/wp-content/uploads/2020/03/Article-hero.jpg'); height: 35vh;">
                <h1 style="color: white;">Registros de la Pandemia</h1>
            </div>
        </div>
    </div>
    
    <form name="Inicio"   action="terceroDoc.html">
        <div class="md-3">
            <p class="fs-2" >
                Para acceder a la información ingrese usuario y contraseña, de no tenerlo favor de registrarse
            </p>
            
            <!--Registrar usuario-->
            <a href="segundoDoc.html">Registrar Usuario</a><br><br>
            
            <!--Ingresar usuario-->
            <label for="usuario" class="form-label">Usuario</label>
            <input type="email" class="form-control" id="usuario">
        </div>
        <br><br>
        
        <div class="mb-3">
        
            <!--Ingresar contraseña-->
            <label for="exampleInputPassword1" class="form-label">Contraseña</label>
            <input type="password" class="form-control" id="contraseña">
        </div>
            
        <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="exampleCheck1">
            <label class="form-check-label" for="exampleCheck1">Acepto los terminos</label>
        </div>
        <!--
        <button type="button" class="btn btn-primary" onclick="RegistrarUsuario()">Inicio</button>-->

        <div class="container">
            <div class="row justify-content-start">
                <div class="col-4">
                    <!--Boton
                    <button type="button" onclick="validar()" class="btn btn-primary" aria-placeholder="Inicio" value="Iniciar Sesion"></button>-->
                    <button type="button" onclick="ValidarUsuario()" class="btn btn-primary ">Iniciar Sesion</button>
                </div>
            </div>
        </div>
            
    </form>    
        
    <script lenguage="JavaScript">

        function ValidarUsuario(){

            var usuario = document.getElementById("usuario").value;
            var contrasenia = document.getElementById("contraseña").value;
            var cliente = '';
            
            
            if(localStorage.getItem('cliente')){
                cliente = JSON.parse(localStorage.getItem('cliente'));

                if(usuario == cliente['Usuario'] && contrasenia == cliente['Contrasenia']){
                    document.Inicio.submit();
                    
                }
            }
        }
        /*//Crear el elemento body
        var body = document.getElementsByTagName("body")[0];
        //Crear el elemento iframe
        var pag = document.createElement("iframe");
        //Crear el elemento boton
        var boton = document.createElement("button");
        var boton2 = document.createElement("button");
        //Crear un link
        var link = document.createElement("link");
        
        //Crear boton
        //boton.setAttribute("href", "segundoDoc.html");
        //boton.setAttribute("target", "_blank");
        boton.innerHTML = "<input type='button' value='Obtener Datos' name='boton' id='boton' onclick='paginaWeb()'>";
        //boton2.innerHTML = "<input type='button' value='Guardar Datos' name='boton2' id='boton2' onclick=''>";
       
        body.appendChild(boton);
        //body.appendChild(boton2);
        //body.appendChild();
        
        Llamar a la funcion, mandar los datos al local storage
        */
        function paginaWeb(){

            //Llamar a la pagina
            fetch('https://api.covidtracking.com/v1/us/daily.json')
            .then(res => res.json())
            .then(function(data) {
                
                try{
                var datos = data;
                //Convierte el objeto en datos
                localStorage.setItem("datos", JSON.stringify(datos));
                
                obtenerLocalStorage();
                }
                catch(error){
                    console.log("surgio un error");
                }
                //document.boton.submit();

                //manda a llamar al segundo documento
                //pag.setAttribute("src", "segundoDoc.html");
                //body.appendChild(pag);
                
                 //var fecha = JSON.parse(localStorage.getItem("checkTimEt"));
                //console.log(datos);
                //document.boton.submit();
            });//Validar porque sale este error
            
        }

        /*
        Obtener los datos del Local Storage
        */
        function obtenerLocalStorage(){
            //if()
            //var nombre = localStorage.getItem("");
            //console.log();

            //obtener el objeto

            var objeto = JSON.parse(localStorage.getItem("datos"));
            console.log(objeto[0].dateChecked);
            link.setAttribute("href","segundoDoc.html");
            //body.innerHTML(link);
            body.appendChild(link)
            //document
        }
       
    </script>
   
    

</body>
</html>