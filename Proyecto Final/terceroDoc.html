<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!--Bootstrap-->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
   
</head>
<body>
    <!--
    <div class="list-group">
        <a href="https://api.covidtracking.com/v1/us/20200501.json" class="list-group-item list-group-item-action active" aria-current="true">
          The current link item
        </a>
        <a href="#" class="list-group-item list-group-item-action">A second link item</a>
        <a href="#" class="list-group-item list-group-item-action">A third link item</a>
        <a href="#" class="list-group-item list-group-item-action">A fourth link item</a>
        <a class="list-group-item list-group-item-action disabled">A disabled link item</a>
      </div>-->

    <div class="table-responsive">
        <table class="table align-middle">
            <!--Encabezado
            <thead>
                <tr class="table-dark">
                  <th scope="col">Fecha</th>
                  <th scope="col">Estados</th>
                  <th scope="col">Positivos</th>
                  <th scope="col">Negativos</th>
                  <th scope="col">death</th>
                  <th scope="col">hospitalized</th>
                  <th scope="col">deathIncrease</th>
                  <th scope="col">hospitalizedIncrease</th>
                  
                </tr>
              </thead>-->
              <!--
              <tbody>
                <tr>
                  <th scope="row">1</th>
                  <td>Mark</td>
                  <td>Otto</td>
                  <td>@mdo</td>
                </tr>
                <tr>
                  <th scope="row">2</th>
                  <td>Jacob</td>
                  <td>Thornton</td>
                  <td>@fat</td>
                </tr>
                <tr>
                  <th scope="row">3</th>
                  <td colspan="2">Larry the Bird</td>
                  <td>@twitter</td>
                </tr>
              </tbody>-->
        </table>
        </div>
      
    <a href="primeraDoc.html">Cerrar Sesion</a>
    

    <script>
        class Info{
                #date = "";
                #states = "";
                #positive = "";
                #nevative = "";
                #death = "";
                #hospitalized = "";
                #deathIncrease = "";
                #hospitalizedIncrease = "";
                

            set date(date){
                this.#date = date;
            }
            set states(states){
                this.#states = states;
            }
            set positive(positive){
                this.#positive = positive;
            }
            set negative(negative){
                this.#nevative = negative;
            }
            set death(death){
                this.#death = death;
            }
            set hospitalized(hospitalized){
                this.#hospitalized = hospitalized;
            }
            set deathIncrease(deathIncrease){
                this.#deathIncrease = deathIncrease;
            }
            set hospitalizedIncrease(hospitalizedIncrease){
                this.#hospitalizedIncrease = hospitalizedIncrease;
            }

            get date(){
                return this.#date;
            }
            get states(){
                return this.#states;
            }
            get positive(){
                return this.#positive;
            }
            get negative(){
                return this.#nevative;
            }
            get death(){
                return this.#death;
            }
            get hospitalized(){
                return this.#hospitalized;
            }
            get deathIncrease(){
                return this.#deathIncrease;
            }
            get  hospitalizedIncrease(){
                return this.#hospitalizedIncrease;
            }
        }

        function pescarJson(){
            //Crerar Array
            this.users = new Array();
        
            //crear las celdas del encabezado 
            fetch('https://api.covidtracking.com/v1/us/daily.json')
            .then(res => res.json())
            .then(function(data){
                try{
                    //Datos mandados al local storage
                    localStorage.setItem("datos", JSON.stringify(data));
                    //Datos obtenidos del local storage
                    var objeto = JSON.parse(localStorage.getItem("datos"));

                    for(var i=0; i<66; i++){
                        // Crea las hileras de la tabla
                        var hilera = document.createElement("tr");
                            
                        //Solo informacion del anio 2021 en adelante
                        if(objeto[i].date > 20201231){

                            //Asignar la informacion 
                            var inform = new Info();//nuevo objeto
                            //Guardar cada dato en la calse Info
                            inform.date = objeto[i].date;
                            inform.states = objeto[i].states;
                            inform.positive = objeto[i].positive;
                            inform.negative = objeto[i].negative;
                            inform.death = objeto[i].death;
                            inform.hospitalized = objeto[i].hospitalized;
                            inform.deathIncrease = objeto[i].deathIncrease;
                            inform.hospitalizedIncrease = objeto[i].hospitalizedIncrease;

                            //Guardar el objeto en un array
                            users.push(inform);
                            
                        }
                    }
                        
                }catch(error){
                    console.log("surgio un error");
                }
            });
        }

        
        // Obtener la referencia del elemento body
        var body = document.getElementsByTagName("body")[0];

        // Crea un elemento <table> y un elemento <tbody>
        var boton = document.createElement("button");
        var div = document.createElement("div");
        var tabla   = document.createElement("table");
        var tblBody = document.createElement("tbody");
        var thead = document.createElement("thead");
        var th = document.createElement("th");




        /*
        this.users = new Array();
        
        //crear las celdas del encabezado 
        fetch('https://api.covidtracking.com/v1/us/daily.json')
        .then(res => res.json())
        .then(function(data){
            try{
                //Datos mandados al local storage
                localStorage.setItem("datos", JSON.stringify(data));
                //Datos obtenidos del local storage
                var objeto = JSON.parse(localStorage.getItem("datos"));

                for(var i=0; i<66; i++){
                    // Crea las hileras de la tabla
                    var hilera = document.createElement("tr");
                        
                    //Solo informacion del anio 2021 en adelante
                    if(objeto[i].date > 20201231){

                        //Asignar la informacion 
                        var inform = new Info();
                        inform.date = objeto[i].date;
                        inform.states = objeto[i].states;
                        inform.positive = objeto[i].positive;
                        inform.negative = objeto[i].negative;
                        inform.death = objeto[i].death;
                        inform.hospitalized = objeto[i].hospitalized;
                        inform.deathIncrease = objeto[i].deathIncrease;
                        inform.hospitalizedIncrease = objeto[i].hospitalizedIncrease;

                        users.push(inform);
                        

                        var celda = document.createElement("td");
                        

                        //console.log((users[i].date));
                        var fecha = document.createTextNode(users[i].states);

                        celda.appendChild(fecha);
                        hilera.appendChild(celda);
                        /*
                        var estado = document.createTextNode(objeto[i].states);
                        celda.appendChild(estado);
                        hilera.appendChild(celda);

                        
                        for (var j = 0; j < 13; j++) {
                            //var celda = document.createElement("td");
                            //var fecha = document.createTextNode(document[i].date);
                            //celda.appendChild(textoCelda);
                            //hilera.appendChild(celda);
                            
                            // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                            // texto sea el contenido de <td>, ubica el elemento <td> al final
                            // de la hilera de la tabla
                            
                        }
                        // agrega la hilera al final de la tabla (al final del elemento tblbody)
                        
                        tblBody.appendChild(hilera);
                    }
                }
                    
            }catch(error){
                console.log("surgio un error");
            }
        });
        // posiciona el <tbody> debajo del elemento <table>
        tabla.setAttribute("class", "table align-middle");
        tabla.appendChild(tblBody);
        tabla.appendChild(thead);
        //
        div.setAttribute("class", "table-responsive");
        div.appendChild(tabla);
        // appends <table> into <body>
        body.appendChild(div);           
           

           
        // Crea las celdas
        for (var i = 0; i < 66; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < 13; j++) {
                while(i<13){
                    var thead = document.createElement("thead");
                    var th = document.createElement("th");

                    th.innerHTML += "<th scope='col'>Fecha</th>";
                    //body.appendChild(th);
                }
            // Crea un elemento <td> y un nodo de texto, haz que el nodo de
            // texto sea el contenido de <td>, ubica el elemento <td> al final
            // de la hilera de la tabla
            var celda = document.createElement("td");
            var textoCelda = document.createTextNode("celda en la hilera "+i+", columna "+j);
            celda.appendChild(textoCelda);
            hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);
        }
        // posiciona el <tbody> debajo del elemento <table>
        tabla.setAttribute("class", "table align-middle");
        tabla.appendChild(tblBody);
        //
        div.setAttribute("class", "table-responsive");
        div.appendChild(tabla);
        // appends <table> into <body>
        body.appendChild(div);

                */
        

        /*
        function genera_tabla() {
            // Obtener la referencia del elemento body
            var body = document.getElementsByTagName("body")[0];

            // Crea un elemento <table> y un elemento <tbody>
            var boton = document.createElement("button");
            var div = document.createElement("div");
            var tabla   = document.createElement("table");
            var tblBody = document.createElement("tbody");
            var thead = document.createElement("thead");

            //crear las celdas del encabezado 
            fetch('https://api.covidtracking.com/v1/us/daily.json')
            .then(res => res.json())
            .then(function(data){
                try{

                    localStorage.setItem("datos", JSON.stringify(data));

                    var objeto = JSON.parse(localStorage.getItem("datos"));
                    
                    for(var i=0; i<66; i++){
                        // Crea las hileras de la tabla
                        var hilera = document.createElement("tr");
                        
                        //Solo informacion del anio 2021 en adelante
                        if(objeto[i].date > 20201231){
                            for (var j = 0; j < 2; j++) {
                                // Crea un elemento <td> y un nodo de texto, haz que el nodo de
                                // texto sea el contenido de <td>, ubica el elemento <td> al final
                                // de la hilera de la tabla
                                var celda = document.createElement("td");
                                var textoCelda = document.createTextNode("celda en la hilera "+i+", columna "+j);
                                celda.appendChild(textoCelda);
                                hilera.appendChild(celda);
                            }
                            // agrega la hilera al final de la tabla (al final del elemento tblbody)
                            tblBody.appendChild(hilera);
                        }
                    }
                    
                    // posiciona el <tbody> debajo del elemento <table>
                    tabla.setAttribute("class", "table align-middle");
                    tabla.appendChild(tblBody);
                    //
                    div.setAttribute("class", "table-responsive");
                    div.appendChild(tabla);
                    // appends <table> into <body>
                    body.appendChild(div);
                    
                }catch(error){
                    console.log("surgio un error");
                }
            });
        
            // Crea las celdas
        for (var i = 0; i < 2; i++) {
            // Crea las hileras de la tabla
            var hilera = document.createElement("tr");

            for (var j = 0; j < 2; j++) {
            // Crea un elemento <td> y un nodo de texto, haz que el nodo de
            // texto sea el contenido de <td>, ubica el elemento <td> al final
            // de la hilera de la tabla
            var celda = document.createElement("td");
            var textoCelda = document.createTextNode("celda en la hilera "+i+", columna "+j);
            celda.appendChild(textoCelda);
            hilera.appendChild(celda);
            }

            // agrega la hilera al final de la tabla (al final del elemento tblbody)
            tblBody.appendChild(hilera);
        }
        // posiciona el <tbody> debajo del elemento <table>
        tabla.setAttribute("class", "table align-middle");
        tabla.appendChild(tblBody);
        //
        div.setAttribute("class", "table-responsive");
        div.appendChild(tabla);
        // appends <table> into <body>
        body.appendChild(div);
        
        // modifica el atributo "border" de la tabla y lo fija a "2";
        //tabla.setAttribute("border", "2");
        }//FIN DE TABLA
        */
        
        /*
        function paginaWeb(){
        //Llamar a la pagina
        fetch('https://api.covidtracking.com/v1/us/daily.json')
        .then(res => res.json())
        .then(function(data) {
            
            try{
            var datos = data;
            //Convierte el objeto en datos
            localStorage.setItem("datos", JSON.stringify(datos));
            
            obtenerLocalStorage();
            }
            catch(error){
                console.log("surgio un error");
            }
            
        });//Validar porque sale este error

        }

        /*
        Obtener los datos del Local Storage
        
        function obtenerLocalStorage(){

        //obtener el objeto, aplicar un parse para obtener los datos
        var objeto = JSON.parse(localStorage.getItem("datos"));
        console.log(objeto[0].dateChecked);

        return objeto[0].date;
        //link.setAttribute("href","segundoDoc.html");
        //body.innerHTML(link);
        //body.appendChild(link)
        //document
        } 
        */

    </script>
</body>
</html>