<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="primeraDoc.html">
    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- MDB Bootstrap-->
    <link
        href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.10.1/mdb.min.css"
        rel="stylesheet"
    />
    
    
</head>
<body>

    <form name="Registro"   action="terceroDoc.html">
        <div class="bg-image">
            <img
                src="https://www.ssaver.gob.mx/wp-content/uploads/2020/05/mapglobcont2.jpg"
                class="w-100"
                alt="Sample"
            />
            <div class="mask" style="backdrop-filter: blur(5px); background: rgba(178, 60, 253, 0.1);">
            <div class="d-flex justify-content-center align-items-center h-100">
                
                <label>
                    <div class="input-group mb-3">
                    <!-- Registro Usuario-->
                        <input type="text" class="form-control" placeholder="Usuario" id="usuario" aria-label="Usuario" aria-describedby="basic-addon1">
                    </div>
                    <!--Registro Correo-->
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" placeholder="Correo" id="correo" aria-label="Recipient's username" aria-describedby="basic-addon2">
                        <span class="input-group-text text-white" id="basic-addon2">@ejemplo.com</span>
                    </div>

                    <p class="fs-6 text-white" >
                        Contraseña: <br>
                        Mínimo ocho caracteres, al menos una letra,<br>
                        un número y un carácter especial.
                    </p>

                    <div class="input-group mb-3">
                        <!-- Registro Contraseña-->
                        <input type="text" class="form-control" placeholder="Contraseña" id="contraseña" aria-label="Contraseña" aria-describedby="contrasenia">
                    </div>
                    
                    <div class="input-group mb-3">
                        <!-- Confirmar Contraseña-->
                        <input type="text" class="form-control" placeholder="Confirmar Contraseña" id="confirm-contraseña" aria-label="confirm-contraseña" aria-describedby="confirm-contraseña">
                    </div>

                    <div class="container">
                        <div class="row justify-content-start">
                            <div class="col-4">
                                <!--Regresasr-->
                                <a href="primeraDoc.html">Regresar</a>
                            </div>

                            <div class="col-4">   
                                <!-- Boton-->
                                <button type="button" onclick="RegistrarUsuario()" class="btn btn-primary ">Submit</button>
                            </div>
                    </div><!--Fin de Container-->
                    
                </label>

            </div>
            </div>
        </div>
    </form>
    
    <script lengage="JavaScript">

        class Usuario{

            constructor(nombre, correo, contrasenia){
                this.nombre = nombre;
                this.correo = correo;
                this.contrasenia = contrasenia;
            }
            
        }

        function RegistrarUsuario(){
            var div = document.getElementsByTagName("div")[0];
            var expresionUsuario = /^[a-zA-Z0-9]+([a-zA-Z0-9](_|-| )[a-zA-Z0-9])*[a-zA-Z0-9]+$/;
            var expresionCorreo = /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/;
            var expresionContrasenia = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!-_/%*#?&])[A-Za-z\d@$!-_/%*#?&]{8,}$/;

            var usuario = document.getElementById("usuario").value;
            var correo = document.getElementById("correo").value;
            var contrasenia = document.getElementById("contraseña").value;

            //valida que el usuario corresponda con la expresion
            if(expresionUsuario.test(usuario)==true){
               
                //valida que el correo corresponda con la expresion
                if(expresionCorreo.test(correo)==true){
                    
                    //valida que la contrase;a corresponda con la expresion
                    if(expresionContrasenia.test(contrasenia)==true){
                    
                        if(contrasenia == document.getElementById("confirm-contraseña").value){
                            
                            var usuario = new Usuario(usuario, correo, contrasenia);
                            
                            var cliente = {
                                Usuario: usuario.nombre,
                                Correo: usuario.correo,
                                Contrasenia: usuario.contrasenia
                            };
                            
                            localStorage.setItem("cliente", JSON.stringify(cliente));
                            alert("Bienvendio " + usuario.nombre);
                            document.Registro.submit();
                            
                        }
                        else{
                            alert("Contraseña con coincide");
                        }
                    }
                    else{
                        alert("Contraseña NO es valida");

                    }//Fin de contrasenia

                }//fin de validacion de correo
                else{
                    alert("Correo NO valido");

                }//Fin de correo

            }//Fin de usuario
            else{
                alert("El usuario No es Valido");
            }
            //valida que la contraseña corresponda con la expresion
            
        }

    </script>
</body>
</html>